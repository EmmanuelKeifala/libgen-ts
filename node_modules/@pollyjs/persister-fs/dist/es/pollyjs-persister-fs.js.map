{"version":3,"file":"pollyjs-persister-fs.js","sources":["../../src/index.js"],"sourcesContent":["import Persister from '@pollyjs/persister';\nimport { API, Defaults } from '@pollyjs/node-server';\n\nconst { parse } = JSON;\n\nexport default class FSPersister extends Persister {\n  constructor() {\n    super(...arguments);\n    this.api = new API(this.options);\n  }\n\n  static get id() {\n    return 'fs';\n  }\n\n  get defaultOptions() {\n    return {\n      recordingsDir: Defaults.recordingsDir\n    };\n  }\n\n  onFindRecording(recordingId) {\n    return this.api.getRecording(recordingId).body || null;\n  }\n\n  onSaveRecording(recordingId, data) {\n    /*\n      Pass the data through the base persister's stringify method so\n      the output will be consistent with the rest of the persisters.\n    */\n    this.api.saveRecording(recordingId, parse(this.stringify(data)));\n  }\n\n  onDeleteRecording(recordingId) {\n    this.api.deleteRecording(recordingId);\n  }\n}\n"],"names":["parse","JSON","FSPersister","Persister","constructor","arguments","api","API","options","id","defaultOptions","recordingsDir","Defaults","onFindRecording","recordingId","getRecording","body","onSaveRecording","data","saveRecording","stringify","onDeleteRecording","deleteRecording"],"mappings":";;;;;;;;;;AAGA,MAAM;EAAEA;IAAUC,IAAlB;AAEA,AAAe,MAAMC,WAAN,SAA0BC,SAA1B,CAAoC;EACjDC,WAAW,GAAG;UACN,GAAGC,SAAT;SACKC,GAAL,GAAW,IAAIC,GAAJ,CAAQ,KAAKC,OAAb,CAAX;;;aAGSC,EAAE,GAAG;WACP,IAAP;;;MAGEC,cAAc,GAAG;WACZ;MACLC,aAAa,EAAEC,QAAQ,CAACD;KAD1B;;;EAKFE,eAAe,CAACC,WAAD,EAAc;WACpB,KAAKR,GAAL,CAASS,YAAT,CAAsBD,WAAtB,EAAmCE,IAAnC,IAA2C,IAAlD;;;EAGFC,eAAe,CAACH,WAAD,EAAcI,IAAd,EAAoB;;;;;SAK5BZ,GAAL,CAASa,aAAT,CAAuBL,WAAvB,EAAoCd,KAAK,CAAC,KAAKoB,SAAL,CAAeF,IAAf,CAAD,CAAzC;;;EAGFG,iBAAiB,CAACP,WAAD,EAAc;SACxBR,GAAL,CAASgB,eAAT,CAAyBR,WAAzB;;;;;;;"}