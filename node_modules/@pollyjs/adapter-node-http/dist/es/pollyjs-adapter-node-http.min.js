import t from"http";import e from"https";import n,{URL as r}from"url";import{Readable as o}from"stream";import i from"nock";import s from"tty";import c from"util";import u from"os";import a from"timers";import f from"@pollyjs/adapter";import{URL as l,HTTP_METHODS as p}from"@pollyjs/utils";var h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t,e){return t(e={exports:{}},e.exports),e.exports}var y=d((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),v={}.hasOwnProperty,m=function(t,e){return v.call(t,e)},g=function(t){try{return!!t()}catch(t){return!0}},b=!g((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),_=d((function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)})),C=(_.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),w=function(t,e,n){if(C(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},O=function(t){return"object"==typeof t?null!==t:"function"==typeof t},F=function(t){if(!O(t))throw TypeError(t+" is not an object!");return t},S=y.document,j=O(S)&&O(S.createElement),E=function(t){return j?S.createElement(t):{}},P=!b&&!g((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a})),R=function(t,e){if(!O(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!O(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!O(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!O(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},k=Object.defineProperty,A={f:b?Object.defineProperty:function(t,e,n){if(F(t),e=R(e,!0),F(n),P)try{return k(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},x=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},M=b?function(t,e,n){return A.f(t,e,x(1,n))}:function(t,e,n){return t[e]=n,t},T=function(t,e,n){var r,o,i,s=t&T.F,c=t&T.G,u=t&T.S,a=t&T.P,f=t&T.B,l=t&T.W,p=c?_:_[e]||(_[e]={}),h=p.prototype,d=c?y:u?y[e]:(y[e]||{}).prototype;for(r in c&&(n=e),n)(o=!s&&d&&void 0!==d[r])&&m(p,r)||(i=o?d[r]:n[r],p[r]=c&&"function"!=typeof d[r]?n[r]:f&&o?w(i,y):l&&d[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):a&&"function"==typeof i?w(Function.call,i):i,a&&((p.virtual||(p.virtual={}))[r]=i,t&T.R&&h&&!h[r]&&M(h,r,i)))};T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128;var N,L=T,I=M,B=0,q=Math.random(),D=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++B+q).toString(36))},$=d((function(t){var e=D("meta"),n=A.f,r=0,o=Object.isExtensible||function(){return!0},i=!g((function(){return o(Object.preventExtensions({}))})),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!O(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!m(t,e)){if(!o(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!m(t,e)){if(!o(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return i&&c.NEED&&o(t)&&!m(t,e)&&s(t),t}}})),W=($.KEY,$.NEED,$.fastKey,$.getWeak,$.onFreeze,d((function(t){var e=y["__core-js_shared__"]||(y["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:_.version,mode:"pure",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}))),G=d((function(t){var e=W("wks"),n=y.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:D)("Symbol."+t))}).store=e})),U=A.f,z=G("toStringTag"),J=function(t,e,n){t&&!m(t=n?t:t.prototype,z)&&U(t,z,{configurable:!0,value:e})},V={f:G},K=A.f,Y=function(t){var e=_.Symbol||(_.Symbol={});"_"==t.charAt(0)||t in e||K(e,t,{value:V.f(t)})},H={}.toString,X=function(t){return H.call(t).slice(8,-1)},Z=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==X(t)?t.split(""):Object(t)},Q=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},tt=function(t){return Z(Q(t))},et=Math.ceil,nt=Math.floor,rt=function(t){return isNaN(t=+t)?0:(t>0?nt:et)(t)},ot=Math.min,it=function(t){return t>0?ot(rt(t),9007199254740991):0},st=Math.max,ct=Math.min,ut=W("keys"),at=function(t){return ut[t]||(ut[t]=D(t))},ft=(N=!1,function(t,e,n){var r,o=tt(t),i=it(o.length),s=function(t,e){return(t=rt(t))<0?st(t+e,0):ct(t,e)}(n,i);if(N&&e!=e){for(;i>s;)if((r=o[s++])!=r)return!0}else for(;i>s;s++)if((N||s in o)&&o[s]===e)return N||s||0;return!N&&-1}),lt=at("IE_PROTO"),pt=function(t,e){var n,r=tt(t),o=0,i=[];for(n in r)n!=lt&&m(r,n)&&i.push(n);for(;e.length>o;)m(r,n=e[o++])&&(~ft(i,n)||i.push(n));return i},ht="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),dt=Object.keys||function(t){return pt(t,ht)},yt={f:Object.getOwnPropertySymbols},vt={f:{}.propertyIsEnumerable},mt=Array.isArray||function(t){return"Array"==X(t)},gt=function(t){return Object(Q(t))},bt=b?Object.defineProperties:function(t,e){F(t);for(var n,r=dt(e),o=r.length,i=0;o>i;)A.f(t,n=r[i++],e[n]);return t},_t=y.document,Ct=_t&&_t.documentElement,wt=at("IE_PROTO"),Ot=function(){},Ft=function(){var t,e=E("iframe"),n=ht.length;for(e.style.display="none",Ct.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ft=t.F;n--;)delete Ft.prototype[ht[n]];return Ft()},St=Object.create||function(t,e){var n;return null!==t?(Ot.prototype=F(t),n=new Ot,Ot.prototype=null,n[wt]=t):n=Ft(),void 0===e?n:bt(n,e)},jt=ht.concat("length","prototype"),Et={f:Object.getOwnPropertyNames||function(t){return pt(t,jt)}},Pt=Et.f,Rt={}.toString,kt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],At={f:function(t){return kt&&"[object Window]"==Rt.call(t)?function(t){try{return Pt(t)}catch(t){return kt.slice()}}(t):Pt(tt(t))}},xt=Object.getOwnPropertyDescriptor,Mt={f:b?xt:function(t,e){if(t=tt(t),e=R(e,!0),P)try{return xt(t,e)}catch(t){}if(m(t,e))return x(!vt.f.call(t,e),t[e])}},Tt=$.KEY,Nt=Mt.f,Lt=A.f,It=At.f,Bt=y.Symbol,qt=y.JSON,Dt=qt&&qt.stringify,$t=G("_hidden"),Wt=G("toPrimitive"),Gt={}.propertyIsEnumerable,Ut=W("symbol-registry"),zt=W("symbols"),Jt=W("op-symbols"),Vt=Object.prototype,Kt="function"==typeof Bt&&!!yt.f,Yt=y.QObject,Ht=!Yt||!Yt.prototype||!Yt.prototype.findChild,Xt=b&&g((function(){return 7!=St(Lt({},"a",{get:function(){return Lt(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Nt(Vt,e);r&&delete Vt[e],Lt(t,e,n),r&&t!==Vt&&Lt(Vt,e,r)}:Lt,Zt=function(t){var e=zt[t]=St(Bt.prototype);return e._k=t,e},Qt=Kt&&"symbol"==typeof Bt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Bt},te=function(t,e,n){return t===Vt&&te(Jt,e,n),F(t),e=R(e,!0),F(n),m(zt,e)?(n.enumerable?(m(t,$t)&&t[$t][e]&&(t[$t][e]=!1),n=St(n,{enumerable:x(0,!1)})):(m(t,$t)||Lt(t,$t,x(1,{})),t[$t][e]=!0),Xt(t,e,n)):Lt(t,e,n)},ee=function(t,e){F(t);for(var n,r=function(t){var e=dt(t),n=yt.f;if(n)for(var r,o=n(t),i=vt.f,s=0;o.length>s;)i.call(t,r=o[s++])&&e.push(r);return e}(e=tt(e)),o=0,i=r.length;i>o;)te(t,n=r[o++],e[n]);return t},ne=function(t){var e=Gt.call(this,t=R(t,!0));return!(this===Vt&&m(zt,t)&&!m(Jt,t))&&(!(e||!m(this,t)||!m(zt,t)||m(this,$t)&&this[$t][t])||e)},re=function(t,e){if(t=tt(t),e=R(e,!0),t!==Vt||!m(zt,e)||m(Jt,e)){var n=Nt(t,e);return!n||!m(zt,e)||m(t,$t)&&t[$t][e]||(n.enumerable=!0),n}},oe=function(t){for(var e,n=It(tt(t)),r=[],o=0;n.length>o;)m(zt,e=n[o++])||e==$t||e==Tt||r.push(e);return r},ie=function(t){for(var e,n=t===Vt,r=It(n?Jt:tt(t)),o=[],i=0;r.length>i;)!m(zt,e=r[i++])||n&&!m(Vt,e)||o.push(zt[e]);return o};Kt||(I((Bt=function(){if(this instanceof Bt)throw TypeError("Symbol is not a constructor!");var t=D(arguments.length>0?arguments[0]:void 0),e=function(n){this===Vt&&e.call(Jt,n),m(this,$t)&&m(this[$t],t)&&(this[$t][t]=!1),Xt(this,t,x(1,n))};return b&&Ht&&Xt(Vt,t,{configurable:!0,set:e}),Zt(t)}).prototype,"toString",(function(){return this._k})),Mt.f=re,A.f=te,Et.f=At.f=oe,vt.f=ne,yt.f=ie,V.f=function(t){return Zt(G(t))}),L(L.G+L.W+L.F*!Kt,{Symbol:Bt});for(var se="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ce=0;se.length>ce;)G(se[ce++]);for(var ue=dt(G.store),ae=0;ue.length>ae;)Y(ue[ae++]);L(L.S+L.F*!Kt,"Symbol",{for:function(t){return m(Ut,t+="")?Ut[t]:Ut[t]=Bt(t)},keyFor:function(t){if(!Qt(t))throw TypeError(t+" is not a symbol!");for(var e in Ut)if(Ut[e]===t)return e},useSetter:function(){Ht=!0},useSimple:function(){Ht=!1}}),L(L.S+L.F*!Kt,"Object",{create:function(t,e){return void 0===e?St(t):ee(St(t),e)},defineProperty:te,defineProperties:ee,getOwnPropertyDescriptor:re,getOwnPropertyNames:oe,getOwnPropertySymbols:ie});var fe=g((function(){yt.f(1)}));L(L.S+L.F*fe,"Object",{getOwnPropertySymbols:function(t){return yt.f(gt(t))}}),qt&&L(L.S+L.F*(!Kt||g((function(){var t=Bt();return"[null]"!=Dt([t])||"{}"!=Dt({a:t})||"{}"!=Dt(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(O(e)||void 0!==t)&&!Qt(t))return mt(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Qt(e))return e}),r[1]=e,Dt.apply(qt,r)}}),Bt.prototype[Wt]||M(Bt.prototype,Wt,Bt.prototype.valueOf),J(Bt,"Symbol"),J(Math,"Math",!0),J(y.JSON,"JSON",!0);var le=_.Object.getOwnPropertySymbols,pe=function(t,e){var n=(_.Object||{})[t]||Object[t],r={};r[t]=e(n),L(L.S+L.F*g((function(){n(1)})),"Object",r)},he=Mt.f;pe("getOwnPropertyDescriptor",(function(){return function(t,e){return he(tt(t),e)}}));var de=_.Object,ye=function(t,e){return de.getOwnPropertyDescriptor(t,e)},ve=y.Reflect,me=ve&&ve.ownKeys||function(t){var e=Et.f(F(t)),n=yt.f;return n?e.concat(n(t)):e},ge=function(t,e,n){e in t?A.f(t,e,x(0,n)):t[e]=n};L(L.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=tt(t),o=Mt.f,i=me(r),s={},c=0;i.length>c;)void 0!==(n=o(r,e=i[c++]))&&ge(s,e,n);return s}});var be=_.Object.getOwnPropertyDescriptors;L(L.S+L.F*!b,"Object",{defineProperties:bt});var _e=_.Object,Ce=function(t,e){return _e.defineProperties(t,e)};L(L.S+L.F*!b,"Object",{defineProperty:A.f});var we,Oe=_.Object,Fe=function(t,e,n){return Oe.defineProperty(t,e,n)},Se=d((function(t){t.exports=function(t,e,n){return e in t?Fe(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0})),je=(we=Se)&&we.__esModule&&Object.prototype.hasOwnProperty.call(we,"default")?we.default:we;Y("asyncIterator"),Y("observable");var Ee=_.Symbol,Pe=function(t,e){return{value:e,done:!!t}},Re={},ke={};M(ke,G("iterator"),(function(){return this}));var Ae=function(t,e,n){t.prototype=St(ke,{next:x(1,n)}),J(t,e+" Iterator")},xe=at("IE_PROTO"),Me=Object.prototype,Te=Object.getPrototypeOf||function(t){return t=gt(t),m(t,xe)?t[xe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Me:null},Ne=G("iterator"),Le=!([].keys&&"next"in[].keys()),Ie=function(){return this},Be=function(t,e,n,r,o,i,s){Ae(n,e,r);var c,u,a,f=function(t){if(!Le&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",p="values"==o,h=!1,d=t.prototype,y=d[Ne]||d["@@iterator"]||o&&d[o],v=y||f(o),m=o?p?f("entries"):v:void 0,g="Array"==e&&d.entries||y;if(g&&(a=Te(g.call(new t)))!==Object.prototype&&a.next&&J(a,l,!0),p&&y&&"values"!==y.name&&(h=!0,v=function(){return y.call(this)}),s&&(Le||h||!d[Ne])&&M(d,Ne,v),Re[e]=v,Re[l]=Ie,o)if(c={values:p?v:f("values"),keys:i?v:f("keys"),entries:m},s)for(u in c)u in d||I(d,u,c[u]);else L(L.P+L.F*(Le||h),e,c);return c};Be(Array,"Array",(function(t,e){this._t=tt(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Pe(1)):Pe(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");Re.Arguments=Re.Array;for(var qe=G("toStringTag"),De="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),$e=0;$e<De.length;$e++){var We=De[$e],Ge=y[We],Ue=Ge&&Ge.prototype;Ue&&!Ue[qe]&&M(Ue,qe,We),Re[We]=Re.Array}var ze=G("species"),Je=function(t,e){return new(function(t){var e;return mt(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!mt(e.prototype)||(e=void 0),O(e)&&null===(e=e[ze])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ve=function(t,e){var n=1==t,r=2==t,o=3==t,i=4==t,s=6==t,c=5==t||s,u=e||Je;return function(e,a,f){for(var l,p,h=gt(e),d=Z(h),y=w(a,f,3),v=it(d.length),m=0,g=n?u(e,v):r?u(e,0):void 0;v>m;m++)if((c||m in d)&&(p=y(l=d[m],m,h),t))if(n)g[m]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return m;case 2:g.push(l)}else if(i)return!1;return s?-1:o||i?i:g}},Ke=Object.assign,Ye=!Ke||g((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Ke({},t)[n]||Object.keys(Ke({},e)).join("")!=r}))?function(t,e){for(var n=gt(t),r=arguments.length,o=1,i=yt.f,s=vt.f;r>o;)for(var c,u=Z(arguments[o++]),a=i?dt(u).concat(i(u)):dt(u),f=a.length,l=0;f>l;)c=a[l++],b&&!s.call(u,c)||(n[c]=u[c]);return n}:Ke,He=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:M(t,r,e[r]);return t},Xe=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},Ze=function(t,e,n,r){try{return r?e(F(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&F(o.call(t)),e}},Qe=G("iterator"),tn=Array.prototype,en=G("toStringTag"),nn="Arguments"==X(function(){return arguments}()),rn=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),en))?n:nn?X(e):"Object"==(r=X(e))&&"function"==typeof e.callee?"Arguments":r},on=G("iterator"),sn=_.getIteratorMethod=function(t){if(null!=t)return t[on]||t["@@iterator"]||Re[rn(t)]},cn=d((function(t){var e={},n={},r=t.exports=function(t,r,o,i,s){var c,u,a,f,l,p=s?function(){return t}:sn(t),h=w(o,i,r?2:1),d=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(void 0===(l=p)||Re.Array!==l&&tn[Qe]!==l){for(a=p.call(t);!(u=a.next()).done;)if((f=Ze(a,h,u.value,r))===e||f===n)return f}else for(c=it(t.length);c>d;d++)if((f=r?h(F(u=t[d])[0],u[1]):h(t[d]))===e||f===n)return f};r.BREAK=e,r.RETURN=n})),un=function(t,e){if(!O(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},an=$.getWeak,fn=Ve(5),ln=Ve(6),pn=0,hn=function(t){return t._l||(t._l=new dn)},dn=function(){this.a=[]},yn=function(t,e){return fn(t.a,(function(t){return t[0]===e}))};dn.prototype={get:function(t){var e=yn(this,t);if(e)return e[1]},has:function(t){return!!yn(this,t)},set:function(t,e){var n=yn(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=ln(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}};var vn,mn={getConstructor:function(t,e,n,r){var o=t((function(t,i){Xe(t,o,e,"_i"),t._t=e,t._i=pn++,t._l=void 0,null!=i&&cn(i,n,t[r],t)}));return He(o.prototype,{delete:function(t){if(!O(t))return!1;var n=an(t);return!0===n?hn(un(this,e)).delete(t):n&&m(n,this._i)&&delete n[this._i]},has:function(t){if(!O(t))return!1;var n=an(t);return!0===n?hn(un(this,e)).has(t):n&&m(n,this._i)}}),o},def:function(t,e,n){var r=an(F(e),!0);return!0===r?hn(t).set(e,n):r[t._i]=n,t},ufstore:hn},gn=A.f,bn=Ve(0),_n=function(t,e,n,r,o,i){var s=y[t],c=s,u=o?"set":"add",a=c&&c.prototype,f={};return b&&"function"==typeof c&&(i||a.forEach&&!g((function(){(new c).entries().next()})))?(c=e((function(e,n){Xe(e,c,t,"_c"),e._c=new s,null!=n&&cn(n,o,e[u],e)})),bn("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(t){var e="add"==t||"set"==t;!(t in a)||i&&"clear"==t||M(c.prototype,t,(function(n,r){if(Xe(this,c,t),!e&&i&&!O(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,r);return e?this:o}))})),i||gn(c.prototype,"size",{get:function(){return this._c.size}})):(c=r.getConstructor(e,t,o,u),He(c.prototype,n),$.NEED=!0),J(c,t),f[t]=c,L(L.G+L.W+L.F,f),i||r.setStrong(c,t,o),c};d((function(t){var e,n=Ve(0),r=un,o=!y.ActiveXObject&&"ActiveXObject"in y,i=$.getWeak,s=Object.isExtensible,c=mn.ufstore,u=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},a={get:function(t){if(O(t)){var e=i(t);return!0===e?c(un(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return mn.def(un(this,"WeakMap"),t,e)}},f=t.exports=_n("WeakMap",u,a,mn,!0,!0);r&&o&&(e=mn.getConstructor(u,"WeakMap"),Ye(e.prototype,a),$.NEED=!0,n(["delete","has","get","set"],(function(t){var n=f.prototype,r=n[t];I(n,t,(function(n,o){if(O(n)&&!s(n)){this._f||(this._f=new e);var i=this._f[t](n,o);return"set"==t?this:i}return r.call(this,n,o)}))})))}));vn="WeakMap",L(L.S,vn,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}});!function(t){L(L.S,t,{from:function(t){var e,n,r,o,i=arguments[1];return C(this),(e=void 0!==i)&&C(i),null==t?new this:(n=[],e?(r=0,o=w(i,arguments[2],2),cn(t,!1,(function(t){n.push(o(t,r++))}))):cn(t,!1,n.push,n),new this(n))}})}("WeakMap");var Cn=_.WeakMap;pe("keys",(function(){return function(t){return dt(gt(t))}}));var wn,On=_.Object.keys,Fn=(wn=!0,function(t,e){var n,r,o=String(Q(t)),i=rt(e),s=o.length;return i<0||i>=s?wn?"":void 0:(n=o.charCodeAt(i))<55296||n>56319||i+1===s||(r=o.charCodeAt(i+1))<56320||r>57343?wn?o.charAt(i):n:wn?o.slice(i,i+2):r-56320+(n-55296<<10)+65536});Be(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Fn(e,n),this._i+=t.length,{value:t,done:!1})}));var Sn,jn,En,Pn=G("species"),Rn=function(t,e){var n,r=F(t).constructor;return void 0===r||null==(n=F(r)[Pn])?e:C(n)},kn=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},An=y.process,xn=y.setImmediate,Mn=y.clearImmediate,Tn=y.MessageChannel,Nn=y.Dispatch,Ln=0,In={},Bn=function(){var t=+this;if(In.hasOwnProperty(t)){var e=In[t];delete In[t],e()}},qn=function(t){Bn.call(t.data)};xn&&Mn||(xn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return In[++Ln]=function(){kn("function"==typeof t?t:Function(t),e)},Sn(Ln),Ln},Mn=function(t){delete In[t]},"process"==X(An)?Sn=function(t){An.nextTick(w(Bn,t,1))}:Nn&&Nn.now?Sn=function(t){Nn.now(w(Bn,t,1))}:Tn?(En=(jn=new Tn).port2,jn.port1.onmessage=qn,Sn=w(En.postMessage,En,1)):y.addEventListener&&"function"==typeof postMessage&&!y.importScripts?(Sn=function(t){y.postMessage(t+"","*")},y.addEventListener("message",qn,!1)):Sn="onreadystatechange"in E("script")?function(t){Ct.appendChild(E("script")).onreadystatechange=function(){Ct.removeChild(this),Bn.call(t)}}:function(t){setTimeout(w(Bn,t,1),0)});var Dn={set:xn,clear:Mn},$n=Dn.set,Wn=y.MutationObserver||y.WebKitMutationObserver,Gn=y.process,Un=y.Promise,zn="process"==X(Gn);function Jn(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=C(e),this.reject=C(n)}var Vn={f:function(t){return new Jn(t)}},Kn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Yn=y.navigator,Hn=Yn&&Yn.userAgent||"",Xn=function(t,e){if(F(t),O(e)&&e.constructor===t)return e;var n=Vn.f(t);return(0,n.resolve)(e),n.promise},Zn=G("species"),Qn=G("iterator"),tr=!1;try{var er=[7][Qn]();er.return=function(){tr=!0},Array.from(er,(function(){throw 2}))}catch(t){}var nr,rr,or,ir,sr,cr,ur=Dn.set,ar=function(){var t,e,n,r=function(){var r,o;for(zn&&(r=Gn.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(zn)n=function(){Gn.nextTick(r)};else if(!Wn||y.navigator&&y.navigator.standalone)if(Un&&Un.resolve){var o=Un.resolve(void 0);n=function(){o.then(r)}}else n=function(){$n.call(y,r)};else{var i=!0,s=document.createTextNode("");new Wn(r).observe(s,{characterData:!0}),n=function(){s.data=i=!i}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),fr=y.TypeError,lr=y.process,pr=lr&&lr.versions,hr=pr&&pr.v8||"",dr=y.Promise,yr="process"==rn(lr),vr=function(){},mr=rr=Vn.f,gr=!!function(){try{var t=dr.resolve(1),e=(t.constructor={})[G("species")]=function(t){t(vr,vr)};return(yr||"function"==typeof PromiseRejectionEvent)&&t.then(vr)instanceof e&&0!==hr.indexOf("6.6")&&-1===Hn.indexOf("Chrome/66")}catch(t){}}(),br=function(t){var e;return!(!O(t)||"function"!=typeof(e=t.then))&&e},_r=function(t,e){if(!t._n){t._n=!0;var n=t._c;ar((function(){for(var r=t._v,o=1==t._s,i=0,s=function(e){var n,i,s,c=o?e.ok:e.fail,u=e.resolve,a=e.reject,f=e.domain;try{c?(o||(2==t._h&&Or(t),t._h=1),!0===c?n=r:(f&&f.enter(),n=c(r),f&&(f.exit(),s=!0)),n===e.promise?a(fr("Promise-chain cycle")):(i=br(n))?i.call(n,u,a):u(n)):a(r)}catch(t){f&&!s&&f.exit(),a(t)}};n.length>i;)s(n[i++]);t._c=[],t._n=!1,e&&!t._h&&Cr(t)}))}},Cr=function(t){ur.call(y,(function(){var e,n,r,o=t._v,i=wr(t);if(i&&(e=Kn((function(){yr?lr.emit("unhandledRejection",o,t):(n=y.onunhandledrejection)?n({promise:t,reason:o}):(r=y.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=yr||wr(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},wr=function(t){return 1!==t._h&&0===(t._a||t._c).length},Or=function(t){ur.call(y,(function(){var e;yr?lr.emit("rejectionHandled",t):(e=y.onrejectionhandled)&&e({promise:t,reason:t._v})}))},Fr=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),_r(e,!0))},Sr=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw fr("Promise can't be resolved itself");(e=br(t))?ar((function(){var r={_w:n,_d:!1};try{e.call(t,w(Sr,r,1),w(Fr,r,1))}catch(t){Fr.call(r,t)}})):(n._v=t,n._s=1,_r(n,!1))}catch(t){Fr.call({_w:n,_d:!1},t)}}};gr||(dr=function(t){Xe(this,dr,"Promise","_h"),C(t),nr.call(this);try{t(w(Sr,this,1),w(Fr,this,1))}catch(t){Fr.call(this,t)}},(nr=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=He(dr.prototype,{then:function(t,e){var n=mr(Rn(this,dr));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=yr?lr.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&_r(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),or=function(){var t=new nr;this.promise=t,this.resolve=w(Sr,t,1),this.reject=w(Fr,t,1)},Vn.f=mr=function(t){return t===dr||t===ir?new or(t):rr(t)}),L(L.G+L.W+L.F*!gr,{Promise:dr}),J(dr,"Promise"),cr="function"==typeof _[sr="Promise"]?_[sr]:y[sr],b&&cr&&!cr[Zn]&&A.f(cr,Zn,{configurable:!0,get:function(){return this}}),ir=_.Promise,L(L.S+L.F*!gr,"Promise",{reject:function(t){var e=mr(this);return(0,e.reject)(t),e.promise}}),L(L.S+!0*L.F,"Promise",{resolve:function(t){return Xn(this===ir?dr:this,t)}}),L(L.S+L.F*!(gr&&function(t,e){if(!e&&!tr)return!1;var n=!1;try{var r=[7],o=r[Qn]();o.next=function(){return{done:n=!0}},r[Qn]=function(){return o},t(r)}catch(t){}return n}((function(t){dr.all(t).catch(vr)}))),"Promise",{all:function(t){var e=this,n=mr(e),r=n.resolve,o=n.reject,i=Kn((function(){var n=[],i=0,s=1;cn(t,!1,(function(t){var c=i++,u=!1;n.push(void 0),s++,e.resolve(t).then((function(t){u||(u=!0,n[c]=t,--s||r(n))}),o)})),--s||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=mr(e),r=n.reject,o=Kn((function(){cn(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}}),L(L.P+L.R,"Promise",{finally:function(t){var e=Rn(this,_.Promise||y.Promise),n="function"==typeof t;return this.then(n?function(n){return Xn(e,t()).then((function(){return n}))}:t,n?function(n){return Xn(e,t()).then((function(){throw n}))}:t)}}),L(L.S,"Promise",{try:function(t){var e=Vn.f(this),n=Kn(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var jr=_.Promise,Er=_.JSON||(_.JSON={stringify:JSON.stringify}),Pr=function(t){return Er.stringify.apply(Er,arguments)},Rr=1e3,kr=60*Rr,Ar=60*kr,xr=24*Ar,Mr=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*xr;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ar;case"minutes":case"minute":case"mins":case"min":case"m":return n*kr;case"seconds":case"second":case"secs":case"sec":case"s":return n*Rr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&!1===isNaN(t))return e.long?function(t){var e=Math.abs(t);if(e>=xr)return Tr(t,e,xr,"day");if(e>=Ar)return Tr(t,e,Ar,"hour");if(e>=kr)return Tr(t,e,kr,"minute");if(e>=Rr)return Tr(t,e,Rr,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=xr)return Math.round(t/xr)+"d";if(e>=Ar)return Math.round(t/Ar)+"h";if(e>=kr)return Math.round(t/kr)+"m";if(e>=Rr)return Math.round(t/Rr)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Tr(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}var Nr=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){let i;function s(...t){if(!s.enabled)return;const e=s,r=Number(new Date),o=r-(i||r);e.diff=o,e.prev=i,e.curr=r,i=r,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return r;c++;const i=n.formatters[o];if("function"==typeof i){const n=t[c];r=i.call(e,n),t.splice(c,1),c--}return r}),n.formatArgs.call(e,t);(e.log||n.log).apply(e,t)}return s.namespace=t,s.enabled=n.enabled(t),s.useColors=n.useColors(),s.color=e(t),s.destroy=r,s.extend=o,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function r(){const t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}function o(t,e){const r=n(this.namespace+(void 0===e?":":e)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},n.disable=function(){const t=[...n.names.map(i),...n.skips.map(i).map(t=>"-"+t)].join(",");return n.enable(""),t},n.enable=function(t){let e;n.save(t),n.names=[],n.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(e=0;e<o;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){const t=n.instances[e];t.enabled=n.enabled(t.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=Mr,Object.keys(t).forEach(e=>{n[e]=t[e]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=e,n.enable(n.load()),n},Lr=d((function(t,e){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))}),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=Nr(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}})),Ir=(Lr.log,Lr.formatArgs,Lr.save,Lr.load,Lr.useColors,Lr.storage,Lr.colors,(t,e=process.argv)=>{const n=t.startsWith("-")?"":1===t.length?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return-1!==r&&(-1===o||r<o)});const{env:Br}=process;let qr;function Dr(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function $r(t,e){if(0===qr)return 0;if(Ir("color=16m")||Ir("color=full")||Ir("color=truecolor"))return 3;if(Ir("color=256"))return 2;if(t&&!e&&void 0===qr)return 0;const n=qr||0;if("dumb"===Br.TERM)return n;if("win32"===process.platform){const t=u.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in Br)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(t=>t in Br)||"codeship"===Br.CI_NAME?1:n;if("TEAMCITY_VERSION"in Br)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Br.TEAMCITY_VERSION)?1:0;if("truecolor"===Br.COLORTERM)return 3;if("TERM_PROGRAM"in Br){const t=parseInt((Br.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Br.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Br.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Br.TERM)||"COLORTERM"in Br?1:n}Ir("no-color")||Ir("no-colors")||Ir("color=false")||Ir("color=never")?qr=0:(Ir("color")||Ir("colors")||Ir("color=true")||Ir("color=always"))&&(qr=1),"FORCE_COLOR"in Br&&(qr="true"===Br.FORCE_COLOR?1:"false"===Br.FORCE_COLOR?0:0===Br.FORCE_COLOR.length?1:Math.min(parseInt(Br.FORCE_COLOR,10),3));var Wr={supportsColor:function(t){return Dr($r(t,t&&t.isTTY))},stdout:Dr($r(!0,s.isatty(1))),stderr:Dr($r(!0,s.isatty(2)))},Gr=d((function(t,e){e.init=function(t){t.inspectOpts={};const n=Object.keys(e.inspectOpts);for(let r=0;r<n.length;r++)t.inspectOpts[n[r]]=e.inspectOpts[n[r]]},e.log=function(...t){return process.stderr.write(c.format(...t)+"\n")},e.formatArgs=function(n){const{namespace:r,useColors:o}=this;if(o){const e=this.color,o="[3"+(e<8?e:"8;5;"+e),i=`  ${o};1m${r} [0m`;n[0]=i+n[0].split("\n").join("\n"+i),n.push(o+"m+"+t.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(e.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):s.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{const t=Wr;t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{const n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(t,e)=>e.toUpperCase());let r=process.env[e];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),t[n]=r,t},{}),t.exports=Nr(e);const{formatters:n}=t.exports;n.o=function(t){return this.inspectOpts.colors=this.useColors,c.inspect(t,this.inspectOpts).replace(/\s*\n\s*/g," ")},n.O=function(t){return this.inspectOpts.colors=this.useColors,c.inspect(t,this.inspectOpts)}})),Ur=(Gr.init,Gr.log,Gr.formatArgs,Gr.save,Gr.load,Gr.useColors,Gr.colors,Gr.inspectOpts,d((function(t){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?t.exports=Lr:t.exports=Gr}))),zr=/^\./,Jr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vr=/\\(\\)?/g,Kr=/^\[object .+?Constructor\]$/,Yr="object"==typeof h&&h&&h.Object===Object&&h,Hr="object"==typeof self&&self&&self.Object===Object&&self,Xr=Yr||Hr||Function("return this")();var Zr,Qr=Array.prototype,to=Function.prototype,eo=Object.prototype,no=Xr["__core-js_shared__"],ro=(Zr=/[^.]+$/.exec(no&&no.keys&&no.keys.IE_PROTO||""))?"Symbol(src)_1."+Zr:"",oo=to.toString,io=eo.hasOwnProperty,so=eo.toString,co=RegExp("^"+oo.call(io).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uo=Xr.Symbol,ao=Qr.splice,fo=Co(Xr,"Map"),lo=Co(Object,"create"),po=uo?uo.prototype:void 0,ho=po?po.toString:void 0;function yo(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function vo(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function mo(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function go(t,e){for(var n=t.length;n--;)if(Oo(t[n][0],e))return n;return-1}function bo(t){return!(!Fo(t)||(e=t,ro&&ro in e))&&(function(t){var e=Fo(t)?so.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?co:Kr).test(function(t){if(null!=t){try{return oo.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function _o(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Co(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return bo(n)?n:void 0}yo.prototype.clear=function(){this.__data__=lo?lo(null):{}},yo.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},yo.prototype.get=function(t){var e=this.__data__;if(lo){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return io.call(e,t)?e[t]:void 0},yo.prototype.has=function(t){var e=this.__data__;return lo?void 0!==e[t]:io.call(e,t)},yo.prototype.set=function(t,e){return this.__data__[t]=lo&&void 0===e?"__lodash_hash_undefined__":e,this},vo.prototype.clear=function(){this.__data__=[]},vo.prototype.delete=function(t){var e=this.__data__,n=go(e,t);return!(n<0)&&(n==e.length-1?e.pop():ao.call(e,n,1),!0)},vo.prototype.get=function(t){var e=this.__data__,n=go(e,t);return n<0?void 0:e[n][1]},vo.prototype.has=function(t){return go(this.__data__,t)>-1},vo.prototype.set=function(t,e){var n=this.__data__,r=go(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},mo.prototype.clear=function(){this.__data__={hash:new yo,map:new(fo||vo),string:new yo}},mo.prototype.delete=function(t){return _o(this,t).delete(t)},mo.prototype.get=function(t){return _o(this,t).get(t)},mo.prototype.has=function(t){return _o(this,t).has(t)},mo.prototype.set=function(t,e){return _o(this,t).set(t,e),this};wo((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(So(t))return ho?ho.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return zr.test(t)&&n.push(""),t.replace(Jr,(function(t,e,r,o){n.push(r?o.replace(Vr,"$1"):e||t)})),n}));function wo(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s),s};return n.cache=new(wo.Cache||mo),n}function Oo(t,e){return t===e||t!=t&&e!=e}wo.Cache=mo;Array.isArray;function Fo(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function So(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==so.call(t)}Ur("nock.common");new Set(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);function jo(t){const e={protocol:t.protocol,hostname:"string"==typeof t.hostname&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:`${t.pathname}${t.search||""}`,href:t.href};return""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`),e}const Eo=[],Po=[],Ro=[],ko=(t,e)=>(...n)=>{const r=t(...n);return e.push(r),r};ko(a.setTimeout,Eo),ko(a.setInterval,Po);ko(a.setImmediate,Ro);var Ao=function(t){const e=t["content-encoding"];return"string"==typeof e&&""!==e},xo=function(t){const e=t.toString("utf8");return Buffer.from(e,"utf8").equals(t)},Mo=function(t,e,r){return"string"==typeof t?t=jo(new n.URL(t)):t instanceof n.URL?t=jo(t):(r=e,e=t,t=null),"function"==typeof e?(r=e,e=t||{}):e=Object.assign(t||{},e),{options:e,callback:r}};function To(t,e){var n=On(t);if(le){var r=le(t);e&&(r=r.filter((function(e){return ye(t,e).enumerable}))),n.push.apply(n,r)}return n}function No(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?To(Object(n),!0).forEach((function(e){je(t,e,n[e])})):be?Ce(t,be(n)):To(Object(n)).forEach((function(e){Fe(t,e,ye(n,e))}))}return t}const Lo=Ee(),Io=Ee(),Bo=new Cn;i.restore();export default class extends f{static get id(){return"node-http"}onConnect(){this.assert("Running concurrent node-http adapters is unsupported, stop any running Polly instances.",!t.ClientRequest[Lo]),this.assert("Running nock concurrently with the node-http adapter is unsupported. Run nock.restore() before connecting to this adapter.",!i.isActive()),this.NativeClientRequest=t.ClientRequest,this.setupNock(),this.patchOverriddenMethods()}onDisconnect(){this.unpatchOverriddenMethods(),i.cleanAll(),i.restore(),this.NativeClientRequest=null}setupNock(){const t=this;i.cleanAll();const e=i(/.*/).persist();p.forEach(n=>{e.intercept(/.*/,n).reply((function(e,n,r){const{req:o,method:i}=this,{headers:s}=o,c=Mo(...Bo.get(o)),u=function(t={}){if(t.href)return t.href;const e=t.protocol||t.proto+":"||"http:",n=t.hostname||t.host||"localhost",{path:r,port:o}=t,i=new l;return i.set("protocol",e),i.set("host",n),i.set("pathname",r),!o||n.includes(":")||80===o&&"http:"===e||443===o&&"https:"===e||i.set("port",o),i.href}(c.options),a=Buffer.concat(o.requestBodyBuffers),f=xo(a)?a.toString("utf8"):a;t.handleRequest({url:u,method:i,headers:s,body:f,requestArguments:{req:o,body:f,respond:r,parsedArguments:c}})}))}),i.activate()}patchOverriddenMethods(){const n={http:t,https:e},{ClientRequest:r}=t;t.ClientRequest=function(){const t=new r(...arguments);return Bo.set(t,[...arguments]),t},t.ClientRequest[Lo]=!0,On(n).forEach(t=>{const e=n[t],{request:r,get:o,globalAgent:i}=e;function s(){const e=Mo(...arguments);return e.options=No(No({},"https"===t?{port:443,protocol:"https:",_defaultAgent:i}:{port:80,protocol:"http:"}),e.options),e}this[t]={get:o,request:r},e.request=function(){const{options:t,callback:e}=s(...arguments);return r(t,e)},e.get=function(){const{options:t,callback:e}=s(...arguments);return o(t,e)}})}unpatchOverriddenMethods(){const n={http:t,https:e};On(n).forEach(t=>{const e=n[t];e.request=this[t].request,e.get=this[t].get,this[t]=void 0})}onRequest(t){const{req:e}=t.requestArguments;e.aborted?t.abort():(t[Io]=()=>{t.aborted||!e.aborted&&!e.destroyed||t.abort()},e.once("abort",t[Io]),e.once("close",t[Io]))}async onFetchResponse(t){const{parsedArguments:e}=t.requestArguments,{method:n,headers:o,body:i}=t,{options:s}=e,c=new this.NativeClientRequest(No(No({},s),{},{method:n,headers:No({},o)},function(t){const e={protocol:t.protocol,hostname:"string"==typeof t.hostname&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:`${t.pathname}${t.search||""}`,href:t.href};return""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`),e}(new r(t.url)))),u=this.getChunksFromBody(i,o),a=new jr((t,e)=>{c.once("response",t),c.once("error",e),c.once("timeout",e)});u.forEach(t=>c.write(t)),c.end();const f=await a,l=await new jr((t,e)=>{const n=[];f.on("data",t=>n.push(t)),f.once("end",()=>t(this.getBodyFromChunks(n,f.headers))),f.once("error",e)});return{headers:f.headers,statusCode:f.statusCode,body:l.body,encoding:l.encoding}}async onRespond(t,e){const{req:n,respond:r}=t.requestArguments,{statusCode:i,body:s,headers:c,encoding:u}=t.response;if(t[Io]&&(n.off("abort",t[Io]),n.off("close",t[Io])),t.aborted)return void r(null,[0,void 0,{}]);if(e)return void r(e);const a=this.getChunksFromBody(s,c,u),f=new o;a.forEach(t=>f.push(t)),f.push(null);const l=new jr(t=>{n.aborted?t():(n.once("response",t),n.once("abort",t),n.once("error",t))});r(null,[i,f,c]),await l}getBodyFromChunks(t,e){if(Ao(e)){const e=t.map(t=>(Buffer.isBuffer(t)||(this.assert("content-encoded responses must all be binary buffers","string"==typeof t),t=Buffer.from(t)),t.toString("base64")));return{encoding:"base64",body:Pr(e)}}const n=function(t){return t&&0!==t.length?Buffer.isBuffer(t[0])?Buffer.concat(t):t.join(""):Buffer.alloc(0)}(t),r=!xo(n);return{encoding:r?"base64":void 0,body:n.toString(r?"base64":"utf8")}}getChunksFromBody(t,e,n){if(!t)return[];if(Buffer.isBuffer(t))return[t];if(Ao(e)){return JSON.parse(t).map(t=>Buffer.from(t,n))}return[Buffer.from(t,n||"utf8")]}}
//# sourceMappingURL=pollyjs-adapter-node-http.min.js.map
